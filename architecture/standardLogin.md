### 通用登陆模块

我们通常在一个大型的分布式系统里面有很多登陆模块，但是为了集中管理会有一个通用登陆系统。

那么问题来了，通用登陆模块在登陆之后怎么做到信息共享呢?

首先，服务端有一个网关层，网关层的一个重要作用就是过滤请求，一般我们在登陆系统登陆之后，我们会在缓存里面去存一个session或者token，
那么我们前端只要请求里面带有token或者cookie都可以进行登陆之后的一个处理。

#### 如何做到信息共享

但是，我们知道cookie是不知道跨域的，就是不同的域名下面是不支持cookie的操作。cookie是可以设置domain的，只要在这个domain下面的子域名请求头
里面都带有这个cookie。这样，我们就可以进行几个模块之间登陆信息共享了。

#### 缓存时间的处理

这个时候就有一个问题来了，缓存我们不可能缓存一辈子，一般都有一个时间限制(一般是30分钟)，但是我们不可能过30分钟缓存没了就让用户
再进行登陆。

通常的处理办法就是每次前端发请求，服务端都会刷新缓存的时间，就是一直在你操作的30分钟后需要重新登陆。

#### 请求回跳的处理

假如我们请求  admin.xm.com/home 页面，但是发现该用户没有登陆，我们需要跳到登陆系统，登陆完之后要跳回去。
我们可以通过history的功能来做，如果是从某个子系统（通过document.referrer来处理）跳过来的，直接history.go(-1)，如果是直接来登陆模块的，
返回主域名首页。


